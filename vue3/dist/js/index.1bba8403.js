import{_ as re}from"./ComponentPage.vue_vue_type_script_setup_true_name_ComponentPage_lang.da812460.js";import{U as d,V as g,W as s,d as ue,a as r,r as de,o as ce,c as pe,Z as x,X as l,k as e,u as a,l as p,a1 as L,j as me,ac as ve,a2 as fe}from"./vue.71710d55.js";import{M as he,u as ge,d as ke}from"./MenuDrawer.76228723.js";import{$ as ye,a as _e,aV as I,E as we,h as xe,W as be,i as Ce,n as Ue,aW as je,aX as $e,aY as ze,at as Ae,aZ as Be,a_ as Le,q as Ie,aN as Ke,o as Me,a$ as Te,au as Ve}from"./NvapForm.32ab4956.js";import{a as K}from"./icon.0fb32957.js";import"./AppPage.vue_vue_type_script_setup_true_name_AppPage_lang.083a423a.js";import"./vue-router.37441a91.js";import"./axios.9678a311.js";const We={class:"inline-block",viewBox:"0 0 21 21",width:"1em",height:"1em"},qe=[s("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"m9.508 4.067l-5 2.857A2 2 0 0 0 3.5 8.661V15.5a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8.66a2 2 0 0 0-1.008-1.736l-5-2.857a2 2 0 0 0-1.984 0zM13.5 8.5l-6 6m0-6l6 6"},null,-1)],Ne={name:"system-uicons-mail-delete",render:function(k,m){return d(),g("svg",We,qe)}},Oe={class:"inline-block",viewBox:"0 0 21 21",width:"1em",height:"1em"},Pe=[s("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 3)"},[s("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"M11.914.5H15.5a2 2 0 0 1 2 2v3.586a1 1 0 0 1-.293.707l-6.793 6.793a2 2 0 0 1-2.828 0l-3.172-3.172a2 2 0 0 1 0-2.828L11.207.793A1 1 0 0 1 11.914.5z"}),s("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"m7.5 13.5l-2.013 1.006A2 2 0 0 1 2.72 13.42L1.105 9.114a2 2 0 0 1 .901-2.45L9.5 2.5"}),s("rect",{width:"2",height:"2",x:"14",y:"2",fill:"currentColor",rx:"1"})],-1)],Xe={name:"system-uicons-tags",render:function(k,m){return d(),g("svg",Oe,Pe)}},Ze={class:"inline-block",viewBox:"0 0 21 21",width:"1em",height:"1em"},De=[s("g",{fill:"none","fill-rule":"evenodd",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},[s("circle",{cx:"8.5",cy:"8.5",r:"5"}),s("path",{d:"M17.571 17.5L12 12"})],-1)],He={name:"system-uicons-search",render:function(k,m){return d(),g("svg",Ze,De)}},Qe={class:"inline-block",viewBox:"0 0 21 21",width:"1em",height:"1em"},Re=[s("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"m13.5 14.5l-4-4l4-4m-4 8l-4-4l4-4"},null,-1)],Ye={name:"system-uicons-chevron-left-double",render:function(k,m){return d(),g("svg",Qe,Re)}},Ee={class:"inline-block",viewBox:"0 0 21 21",width:"1em",height:"1em"},Fe=[s("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"m6.5 13.499l4 4.001l4-4.001m-4 4.001v-13"},null,-1)],Ge={name:"system-uicons-arrow-down",render:function(k,m){return d(),g("svg",Ee,Fe)}},Se={class:"flex items-center"},Je={class:"flex items-center"},el={class:"w-full menu"},ll={class:"py-3 menu-list"},al={key:0,class:"flex items-center justify-center py-4"},cl=ue({__name:"index",setup(k){const m=r(!0),M={title:{required:!0,message:"请输入菜单名",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}},t=de({parentId:0,title:"",path:"",component:"",code:"",icon:"",order:0,name:"",redirect:null,permissions:"",hidden:!1,keepAlive:!1}),b=r(!1),T=r(!1);ce(()=>{const{userInfo:i}=ye(_e());y.value=i.value.menuList||[],m.value=!1});const U=r(""),v=r(""),j=r("");let _=r([]);const V=pe(()=>!_.value.length),W=r([{label:"添加顶级菜单",key:"home",disabled:!1},{label:"添加子菜单",key:"son",disabled:V}]),q=r(null);function N(){delete t.children,delete t.id,t.permissions=t.permissions.split(","),ge(t.name,t).then(i=>{i.code==200?window.$message.success("修改成功"):window.$message.error("修改失败")})}const O=i=>{U.value=i==="home"?"添加顶级菜单":`添加子菜单：${v.value}`,P()},$=r(),P=()=>{const{openDrawer:i}=$.value;i()};let f=r([]);const y=r([]);function X(){f.value.length?f.value=[]:f.value=a(y).map(i=>i.key)}const w=r("");function Z(i){if(i.length){j.value=i[0];const n=I(a(y),i[0]);_.value=i,v.value=n.title,n.permissions&&we(n.permissions)&&(n.permissions=n.permissions.join(",")),Object.assign(t,n),b.value=!0}else b.value=!1,_.value=[],v.value=""}function D(i){f.value=i}function H(){const i=I(a(y),_.value[0]);Object.assign(t,i)}function Q(){window.$dialog.info({title:"提示",content:"您确定想删除此权限吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{window.$message.success("删除成功")},onNegativeClick:()=>{window.$message.error("已取消")}})}const R=()=>{window.$dialog.info({title:"提示",content:"您确定想删除此菜单吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{ke(v.value).then(i=>{window.$message.success("删除成功")})},onNegativeClick:()=>{window.$message.error("已取消")}})};return(i,n)=>{const Y=Ge,h=xe,E=be,F=Ye,C=Ce,G=He,c=Ue,S=je,J=$e,z=ze,A=Ae,ee=Xe,le=Ne,ae=Be,u=Le,B=Ie,te=Ke,ne=Me,oe=Te,ie=Ve,se=re;return d(),x(se,null,{default:l(()=>[e(ie,{cols:"1 s:1 m:1 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12},{default:l(()=>[e(A,{span:"1"},{default:l(()=>[e(z,{segmented:{content:!0},size:"small"},{header:l(()=>[e(C,null,{default:l(()=>[e(E,{trigger:"hover",onSelect:O,options:a(W)},{default:l(()=>[e(h,{type:"primary",ghost:"","icon-placement":"right"},{icon:l(()=>[s("div",Se,[e(Y)])]),default:l(()=>[p(" 添加菜单 ")]),_:1})]),_:1},8,["options"]),e(h,{type:"primary",ghost:"","icon-placement":"left",onClick:X},{icon:l(()=>[s("div",Je,[e(F)])]),default:l(()=>[p(" 全部"+L(a(f).length?"收起":"展开")+" ",1)]),_:1})]),_:1})]),default:l(()=>[s("div",el,[e(c,{type:"text",value:a(w),"onUpdate:value":n[0]||(n[0]=o=>me(w)?w.value=o:null),placeholder:"输入菜单名称搜索"},{suffix:l(()=>[e(G)]),_:1},8,["value"]),s("div",ll,[a(m)?(d(),g("div",al,[e(S,{size:"medium"})])):(d(),x(J,{key:1,"block-line":"",cascade:"",checkable:"","key-field":"id","label-field":"title","children-field":"children","virtual-scroll":!0,pattern:a(w),data:a(y),expandedKeys:a(f),style:{"max-height":"650px",overflow:"hidden"},"onUpdate:selectedKeys":Z,"onUpdate:expandedKeys":D},null,8,["pattern","data","expandedKeys"]))])])]),_:1})]),_:1}),e(A,{span:"2"},{default:l(()=>[e(z,{segmented:{content:!0},bordered:!0,size:"small"},{header:l(()=>[e(C,null,{default:l(()=>[e(ee),s("span",null,"编辑菜单"+L(a(v)?`：${a(v)}`:""),1)]),_:1})]),"header-extra":l(()=>[e(h,{onClick:R,type:"primary",ghost:"","icon-placement":"right"},{icon:l(()=>[e(le)]),default:l(()=>[p(" 删除菜单 ")]),_:1})]),default:l(()=>[e(ae,{type:"success",closable:""},{default:l(()=>[p(" 从菜单列表选择一项后，进行编辑")]),_:1}),a(b)?(d(),x(oe,{key:0,model:a(t),rules:M,ref_key:"formRef",ref:q,"label-placement":"left","label-width":100,class:"py-4"},{default:l(()=>[e(u,{label:"菜单名",path:"label"},{default:l(()=>[e(c,{placeholder:"请输入菜单名",value:a(t).title,"onUpdate:value":n[1]||(n[1]=o=>a(t).title=o)},null,8,["value"])]),_:1}),e(u,{label:"路径",path:"path"},{default:l(()=>[e(c,{placeholder:"请输入路径",value:a(t).path,"onUpdate:value":n[2]||(n[2]=o=>a(t).path=o)},null,8,["value"])]),_:1}),e(u,{label:"地址",path:"component"},{default:l(()=>[e(c,{placeholder:"请输入地址",value:a(t).component,"onUpdate:value":n[3]||(n[3]=o=>a(t).component=o)},null,8,["value"])]),_:1}),e(u,{label:"重定向",path:"redirect"},{default:l(()=>[e(c,{placeholder:"请输入重定向",value:a(t).redirect,"onUpdate:value":n[4]||(n[4]=o=>a(t).redirect=o)},null,8,["value"])]),_:1}),e(u,{label:"图标",path:"icon"},{default:l(()=>[e(c,{placeholder:"请选择图标",value:a(t).icon,"onUpdate:value":n[5]||(n[5]=o=>a(t).icon=o)},{suffix:l(()=>{return[(d(),x(ve((o=a(t).icon,o.includes("system-uicons:")?K(o,{size:20}):K("system-uicons:"+o,{size:20})))))];var o}),_:1},8,["value"])]),_:1}),e(u,{label:"菜单权限",path:"code"},{default:l(()=>[e(c,{placeholder:"请输入权限",value:a(t).code,"onUpdate:value":n[6]||(n[6]=o=>a(t).code=o)},null,8,["value"])]),_:1}),e(u,{label:"按钮权限名称",path:"permissions"},{default:l(()=>[e(c,{placeholder:"请输入按钮权限名称，多个权限用，分割",value:a(t).permissions,"onUpdate:value":n[7]||(n[7]=o=>a(t).permissions=o)},null,8,["value"])]),_:1}),e(u,{label:"是否隐藏",path:"hidden"},{default:l(()=>[e(B,{round:!1,value:a(t).hidden,"onUpdate:value":n[8]||(n[8]=o=>a(t).hidden=o),size:"large"},null,8,["value"])]),_:1}),e(u,{label:"是否缓存",path:"keepAlive"},{default:l(()=>[e(B,{round:!1,value:a(t).keepAlive,"onUpdate:value":n[9]||(n[9]=o=>a(t).keepAlive=o),size:"large"},null,8,["value"]),e(te,{"ml-10":"",type:"success"},{default:l(()=>[p('想要被缓存，在组件的setup里必须声明 name="xxxx" ')]),_:1})]),_:1}),e(u,{label:"排序",path:"order"},{default:l(()=>[e(ne,{value:a(t).order,"onUpdate:value":n[10]||(n[10]=o=>a(t).order=o)},null,8,["value"])]),_:1}),e(u,{path:"auth",style:{"margin-left":"100px"}},{default:l(()=>[e(C,null,{default:l(()=>[e(h,{type:"primary",loading:a(T),onClick:N},{default:l(()=>[p("保存修改")]),_:1},8,["loading"]),e(h,{onClick:H},{default:l(()=>[p("重置")]),_:1}),e(h,{onClick:Q},{default:l(()=>[p("删除")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):fe("",!0)]),_:1})]),_:1})]),_:1}),e(he,{ref_key:"createDrawerRef",ref:$,title:a(U),parentId:a(j)},null,8,["title","parentId"])]),_:1})}}});export{cl as default};
