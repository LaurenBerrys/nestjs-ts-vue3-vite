import{j as V,t as C}from"./Table.6259e9bb.js";import{ag as M,x as _,A as k,_ as L,N as $,f as z,K as O,ah as S}from"./BasicForm.943f4865.js";import{d as j,c as f,P as b,U as N,Q as p,R as x,S as g,F as T,N as q,V as y,Z as E,W as d,k as w,l as K,_ as Q,E as A,A as R,$ as P,a as h,g as U,w as D,u as m,b as B,n as W}from"./vue.c8caa29a.js";import{a as v}from"./index.3d4ba369.js";const Z=j({name:"TableAction",components:{DownOutlined:M},props:{actions:{type:Array,default:null,required:!0},dropDownActions:{type:Array,default:null},style:{type:String,default:"button"},select:{type:Function,default:()=>{}}},setup(a){const{hasPermission:o}=V(),i=a.style==="button"?"default":a.style==="text"?"primary":"default",s=a.style==="button"?void 0:a.style==="text"||void 0,t=f(()=>({text:s,type:i,size:"small"})),l=f(()=>(b(a.dropDownActions)||[]).filter(n=>o(n.auth)&&r(n)).map(n=>{const{popConfirm:e}=n;return{size:"small",text:s,type:i,...n,...e,onConfirm:e==null?void 0:e.confirm,onCancel:e==null?void 0:e.cancel}}));function r(n){const e=n.ifShow;let c=!0;return _(e)&&(c=e),k(e)&&(c=e(n)),c}return{getActions:f(()=>(b(a.actions)||[]).filter(n=>o(n.auth)&&r(n)).map(n=>{const{popConfirm:e}=n;return{size:"small",text:s,type:i,...n,...e||{},onConfirm:e==null?void 0:e.confirm,onCancel:e==null?void 0:e.cancel,enable:!!e}})),getDropdownList:l,getMoreProps:t}}}),G={class:"tableAction"},H={class:"flex items-center justify-center"},I={class:"flex items-center"},J=g("span",null,"更多",-1),et=L(Z,[["render",function(a,o,i,s,t,l){const r=$,n=z,e=N("DownOutlined"),c=O;return p(),x("div",G,[g("div",H,[(p(!0),x(T,null,q(a.getActions,(u,F)=>(p(),y(n,A({key:`${F}-${u.label}`},u,{class:"mx-2"}),E({default:d(()=>[K(Q(u.label)+" ",1)]),_:2},[u.hasOwnProperty("icon")?{name:"icon",fn:d(()=>[w(r,{component:u.icon},null,8,["component"])]),key:"0"}:void 0]),1040))),128)),a.dropDownActions&&a.getDropdownList.length?(p(),y(c,{key:0,trigger:"hover",options:a.getDropdownList,onSelect:a.select},{default:d(()=>[R(a.$slots,"more"),a.$slots.more?P("",!0):(p(),y(n,A({key:0},a.getMoreProps,{class:"mx-2","icon-placement":"right"}),{default:d(()=>[g("div",I,[J,w(r,{size:"14",class:"ml-1"},{default:d(()=>[w(e)]),_:1})])]),_:1},16))]),_:3},8,["options","onSelect"])):P("",!0)])])}]]);function st(a){const o=h(null),i=U(),s=()=>m(o.value);return[t=>{C(()=>{o.value=null}),o.value=t,i==null||i.emit("register",t),D(()=>a,()=>{a&&t.setProps(S(a))},{immediate:!0,deep:!0})},{setProps:t=>{var l;(l=s())==null||l.setProps(t)},openModal:()=>{var t;(t=s())==null||t.openModal()},closeModal:()=>{var t;(t=s())==null||t.closeModal()},setSubLoading:t=>{var l;(l=s())==null||l.setSubLoading(t)}}]}function nt(a){const o=h(null),i=h(!1);async function s(){const t=m(o);return await W(),t}return[function(t){B(()=>{o.value=null,i.value=null}),m(i)&&t===m(o)||(o.value=t,i.value=!0,D(()=>a,()=>{a&&t.setProps(S(a))},{immediate:!0,deep:!0}))},{setSchemas:async(t,l)=>{await(await s()).setSchemas(t,l)},setProps:async t=>{await(await s()).setProps(t)},resetFields:async()=>{s().then(async t=>{await t.resetFields()})},clearValidate:async t=>{await(await s()).clearValidate(t)},getFieldsValue:()=>{var t;return(t=m(o))==null?void 0:t.getFieldsValue()},setFieldsValue:async t=>{await(await s()).setFieldsValue(t)},submit:async()=>(await s()).submit(),validate:async t=>(await s()).validate(t)}]}const ot=a=>v({url:"/nest-api/role",method:"post",data:a}),lt=a=>v({url:"/nest-api/role",method:"get",params:a}),it=(a,o)=>v({url:"/nest-api/role/"+a,method:"patch",data:o});export{et as T,nt as a,it as b,ot as c,lt as g,st as u};
