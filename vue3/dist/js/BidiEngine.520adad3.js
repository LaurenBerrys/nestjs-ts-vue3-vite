const $=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],Y=["آ","أ","إ","ا"],Lt=["ﻵ","ﻷ","ﻹ","ﻻ"],gt=["ﻶ","ﻸ","ﻺ","ﻼ"],J=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],dt=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],Bt=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],Ut=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],mt=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],nt=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],Rt=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],ut=["ء","ف"],Ft=["غ","ي"],bt=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],pt=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],e=0,n=1,l=2,p=3,t=4,x=5,G=6,r=7,v=8,O=10,h=11,i=12,c=18,_t=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],I=100,St=[I+0,e,e,e,e,I+1,I+2,I+3,n,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,I+4,t,t,t,e,t,e,t,e,t,t,t,e,e,t,t,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,t,t,e,e,t,t,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,I+5,r,r,I+6,I+7],wt=[[c,c,c,c,c,c,c,c,c,G,x,G,v,x,c,c,c,c,c,c,c,c,c,c,c,c,c,c,x,x,x,G,v,t,t,h,h,h,t,t,t,t,t,O,9,O,9,9,l,l,l,l,l,l,l,l,l,l,9,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,c,c,c,c,c,c,x,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,9,t,h,h,h,h,t,t,t,t,e,t,t,c,t,t,h,h,l,l,t,e,t,t,t,l,e,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,t,t,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,n,i,n,i,i,n,i,i,n,i,t,t,t,t,t,t,t,t,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t],[p,p,p,p,t,t,t,t,r,h,h,r,9,r,t,t,i,i,i,i,i,i,i,i,i,i,i,r,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,p,p,p,p,p,p,p,p,p,p,h,p,p,r,r,r,i,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,i,i,i,i,i,i,i,p,t,i,i,i,i,i,i,r,r,i,i,t,i,i,i,i,r,r,l,l,l,l,l,l,l,l,l,l,r,r,r,r,r,r],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,r,r,i,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,i,i,i,i,i,i,i,i,i,i,i,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,i,i,i,i,i,i,i,i,i,n,n,t,t,t,t,n,t,t,t,t,t],[v,v,v,v,v,v,v,v,v,v,v,c,c,c,e,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,v,x,13,14,15,16,17,9,h,h,h,h,h,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,9,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,v,c,c,c,c,c,t,t,t,t,t,c,c,c,c,c,c,l,e,t,t,l,l,l,l,l,l,O,O,t,t,t,e,l,l,l,l,l,l,l,l,l,l,O,O,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,t,t,t,t,t,n,i,n,n,n,n,n,n,n,n,n,n,O,n,n,n,n,n,n,n,n,n,n,n,n,n,t,n,n,n,n,n,t,n,t,n,n,t,n,n,t,n,n,n,n,n,n,n,n,n,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,i,i,i,i,i,i,i,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,9,t,9,t,t,9,t,t,t,t,t,t,t,t,t,h,t,t,O,O,t,t,t,t,t,h,h,t,t,t,t,t,r,r,r,r,r,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,c],[t,t,t,h,h,h,t,t,t,t,t,O,9,O,9,9,l,l,l,l,l,l,l,l,l,l,9,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,e,e,e,e,e,e,t,t,e,e,e,e,e,e,t,t,e,e,e,e,e,e,t,t,e,e,e,t,t,t,h,h,t,t,t,h,h,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]];class Yt{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(u,a,s){if(this.sourceToTarget=[],this.targetToSource=[],!u)return"";if(function(g,m,R){V=[],K=[];for(let d=0;d<R;d++)g[d]=d,m[d]=d,V[d]=d}(this.sourceToTarget,this.targetToSource,u.length),!this.checkParameters(a,s))return u;a=this.inputFormat,s=this.outputFormat;let f=u;const L=kt,A=st(a.charAt(1)),T=st(s.charAt(1)),w=(a.charAt(0)==="I"?"L":a.charAt(0))+A,B=(s.charAt(0)==="I"?"L":s.charAt(0))+T,F=a.charAt(2)+s.charAt(2);L.defInFormat=w,L.defOutFormat=B,L.defSwap=F;const U=z(u,w,B,F,L);let C=!1;return s.charAt(1)==="R"?C=!0:s.charAt(1)!=="C"&&s.charAt(1)!=="D"||(C=this.checkContextual(U)==="rtl"),this.sourceToTarget=V,this.targetToSource=function(g){const m=new Array(g.length);for(let R=0;R<g.length;R++)m[g[R]]=R;return m}(this.sourceToTarget),q=this.targetToSource,f=a.charAt(3)===s.charAt(3)?U:s.charAt(3)==="S"?function(g,m,R){if(m.length===0)return"";g===void 0&&(g=!0),R===void 0&&(R=!0);const d=(m=String(m)).split("");let N=0,_=1,j=d.length;g||(N=d.length-1,_=-1,j=1);const D=function(b,Tt,E,M,At){let y=0;const rt=[];let et=0;for(let S=Tt;S*E<M;S+=E)if(ht(b[S])||Z(b[S])){if(b[S]==="ل"&&Ct(b,S+E,E,M)){b[S]=jt(b[S+E],y===0?Lt:gt),S+=E,xt(b,S,E,M),At&&(rt[et]=S,et++),y=0;continue}const it=b[S];y===1?b[S]=at(b,S+E,E,M)?It(b[S]):X(b[S],Bt):at(b,S+E,E,M)===!0?b[S]=X(b[S],mt):b[S]=X(b[S],dt),Z(it)||(y=1),Ot(it)===!0&&(y=0)}else y=0;return rt}(d,N,_,j,R);let tt="";for(let b=0;b<d.length;b++)R&&vt(D,D.length,b)>-1?(ft(q,b,!g,-1),V.splice(b,1)):tt+=d[b];return tt}(C,U,!0):function(g,m,R){if(g.length===0)return"";R===void 0&&(R=!0),m===void 0&&(m=!0);let d="";const N=(g=String(g)).split("");for(let _=0;_<g.length;_++){let j=!1;if(N[_]>="ﹰ"&&N[_]<"\uFEFF"){const D=g.charCodeAt(_);N[_]>="ﻵ"&&N[_]<="ﻼ"?(m?(_>0&&R&&N[_-1]===" "?d=d.substring(0,d.length-1)+"ل":(d+="ل",j=!0),d+=Y[(D-65269)/2]):(d+=Y[(D-65269)/2],d+="ل",_+1<g.length&&R&&N[_+1]===" "?_++:j=!0),j&&(ft(q,_,!0,1),V.splice(_,0,V[_]))):d+=Rt[D-65136]}else d+=N[_]}return d}(U,C,!0),this.sourceToTarget=V,this.targetToSource=q,this.levels=K,f}_inputFormatSetter(u){if(!ct.test(u))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=u}_outputFormatSetter(u){if(!ct.test(u))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=u}checkParameters(u,a){return u?this._inputFormatSetter(u):u=this.inputFormat,a?this._outputFormatSetter(a):a=this.outputFormat,u!==a}checkContextual(u){let a=H(u);if(a!=="ltr"&&a!=="rtl"){try{a=document.dir.toLowerCase()}catch{}a!=="ltr"&&a!=="rtl"&&(a="ltr")}return a}hasBidiChar(u){return Pt.test(u)}}function z(o,u,a,s,f){const L=function(F,U,C){if(U.inFormat===void 0&&(U.inFormat=C.defInFormat),U.outFormat===void 0&&(U.outFormat=C.defOutFormat),U.swap===void 0&&(U.swap=C.defSwap),U.inFormat===U.outFormat)return U;const g=U.inFormat.substring(0,1),m=U.outFormat.substring(0,1);let R,d=U.inFormat.substring(1,4),N=U.outFormat.substring(1,4);return d.charAt(0)==="C"&&(R=H(F),d=R==="ltr"||R==="rtl"?R.toUpperCase():U.inFormat.charAt(2)==="L"?"LTR":"RTL",U.inFormat=g+d),N.charAt(0)==="C"&&(R=H(F),R==="rtl"?N="RTL":R==="ltr"?(R=function(_){const j=_.split("");return j.reverse(),H(j.join(""))}(F),N=R.toUpperCase()):N=U.outFormat.charAt(2)==="L"?"LTR":"RTL",U.outFormat=m+N),U}(o,{inFormat:u,outFormat:a,swap:s},f);if(L.inFormat===L.outFormat)return o;u=L.inFormat,a=L.outFormat,s=L.swap;const A=u.substring(0,1),T=u.substring(1,4),w=a.substring(0,1),B=a.substring(1,4);if(f.inFormat=u,f.outFormat=a,f.swap=s,A==="L"&&a==="VLTR"){if(T==="LTR")return f.dir=P,k(o,f);if(T==="RTL")return f.dir=W,k(o,f)}if(A==="V"&&w==="V")return f.dir=T==="RTL"?W:P,Q(o,f);if(A==="L"&&a==="VRTL")return T==="LTR"?(f.dir=P,o=k(o,f)):(f.dir=W,o=k(o,f)),Q(o);if(u==="VLTR"&&a==="LLTR")return f.dir=P,k(o,f);if(A==="V"&&w==="L"&&T!==B)return o=Q(o),T==="RTL"?z(o,"LLTR","VLTR",s,f):z(o,"LRTL","VRTL",s,f);if(u==="VRTL"&&a==="LRTL")return z(o,"LRTL","VRTL",s,f);if(A==="L"&&w==="L"){const F=f.swap;return f.swap=F.substr(0,1)+"N",T==="RTL"?(f.dir=W,o=k(o,f),f.swap="N"+F.substr(1,2),f.dir=P,o=k(o,f)):(f.dir=P,o=k(o,f),f.swap="N"+F.substr(1,2),o=z(o,"VLTR","LRTL",f.swap,f)),o}return o}function H(o){const u=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(o);return u?u[0]<="z"?"ltr":"rtl":""}function k(o,u){const a=o.split(""),s=[];return lt(a,s,u),function(f,L,A){if(A.hiLevel!==0&&A.swap.substr(0,1)!==A.swap.substr(1,2))for(let T=0;T<f.length;T++)L[T]===1&&(f[T]=Et(f[T]))}(a,s,u),ot(2,a,s,u),ot(1,a,s,u),K=s,a.join("")}function lt(o,u,a){const s=o.length,f=a.dir?pt:bt;let L=0,A=-1;const T=[],w=[];a.hiLevel=a.dir,a.lastArabic=!1,a.hasUbatAl=!1,a.hasUbatB=!1,a.hasUbatS=!1;for(let B=0;B<s;B++)T[B]=Nt(o[B]);for(let B=0;B<s;B++){const F=L,U=Vt(o,T,w,B,a);w[B]=U,L=f[F][U];const C=240&L;L&=15;const g=f[L][Dt];if(u[B]=g,C>0)if(C===16){for(let m=A;m<B;m++)u[m]=1;A=-1}else A=-1;if(f[L][yt])A===-1&&(A=B);else if(A>-1){for(let m=A;m<B;m++)u[m]=g;A=-1}T[B]===x&&(u[B]=0),a.hiLevel|=g}a.hasUbatS&&function(B,F,U,C){for(let g=0;g<U;g++)if(B[g]===G){F[g]=C.dir;for(let m=g-1;m>=0&&B[m]===v;m--)F[m]=C.dir}}(T,u,s,a)}function Nt(o){const u=o.charCodeAt(0),a=St[u>>8];return a<I?a:wt[a-I][255&u]}function Q(o,u){const a=o.split("");if(u){const s=[];lt(a,s,u),K=s}return a.reverse(),V.reverse(),a.join("")}function vt(o,u,a){for(let s=0;s<u;s++)if(o[s]===a)return s;return-1}function ht(o){for(let u=0;u<ut.length;u++)if(o>=ut[u]&&o<=Ft[u])return!0;return!1}function at(o,u,a,s){for(;u*a<s&&Z(o[u]);)u+=a;return!!(u*a<s&&ht(o[u]))}function Ct(o,u,a,s){for(;u*a<s&&Z(o[u]);)u+=a;let f=" ";if(!(u*a<s))return!1;f=o[u];for(let L=0;L<Y.length;L++)if(Y[L]===f)return!0;return!1}function ot(o,u,a,s){if(s.hiLevel<o)return;if(o===1&&s.dir===W&&!s.hasUbatB)return u.reverse(),void V.reverse();const f=u.length;let L,A,T,w,B,F=0;for(;F<f;){if(a[F]>=o){for(L=F+1;L<f&&a[L]>=o;)L++;for(A=F,T=L-1;A<T;A++,T--)w=u[A],u[A]=u[T],u[T]=w,B=V[A],V[A]=V[T],V[T]=B;F=L}F++}}function Vt(o,u,a,s,f){const L=u[s];return{UBAT_L:()=>(f.lastArabic=!1,e),UBAT_R:()=>(f.lastArabic=!1,n),UBAT_ON:()=>t,UBAT_AN:()=>p,UBAT_EN:()=>f.lastArabic?p:l,UBAT_AL:()=>(f.lastArabic=!0,f.hasUbatAl=!0,n),UBAT_WS:()=>t,UBAT_CS:()=>{let A,T;return s<1||s+1>=u.length||(A=a[s-1])!==l&&A!==p||(T=u[s+1])!==l&&T!==p?t:(f.lastArabic&&(T=p),T===A?T:t)},UBAT_ES:()=>(s>0?a[s-1]:x)===l&&s+1<u.length&&u[s+1]===l?l:t,UBAT_ET:()=>{if(s>0&&a[s-1]===l)return l;if(f.lastArabic)return t;let A=s+1;const T=u.length;for(;A<T&&u[A]===h;)A++;return A<T&&u[A]===l?l:t},UBAT_NSM:()=>{if(f.inFormat==="VLTR"){const A=u.length;let T=s+1;for(;T<A&&u[T]===i;)T++;if(T<A){const w=o[s].charCodeAt[0],B=w>=1425&&w<=2303||w===64286,F=u[T];if(B&&(F===n||F===r))return n}}return s<1||u[s-1]===x?t:a[s-1]},UBAT_B:()=>(f.lastArabic=!0,f.hasUbatB=!0,f.dir),UBAT_S:()=>(f.hasUbatS=!0,t),UBAT_LRE:()=>(f.lastArabic=!1,t),UBAT_RLE:()=>(f.lastArabic=!1,t),UBAT_LRO:()=>(f.lastArabic=!1,t),UBAT_RLO:()=>(f.lastArabic=!1,t),UBAT_PDF:()=>(f.lastArabic=!1,t),UBAT_BN:()=>t}[_t[L]]()}function Et(o){let u,a=0,s=$.length-1;for(;a<=s;)if(u=Math.floor((a+s)/2),o<$[u][0])s=u-1;else{if(!(o>$[u][0]))return $[u][1];a=u+1}return o}function Ot(o){for(let u=0;u<nt.length;u++)if(nt[u]===o)return!0;return!1}function It(o){for(let u=0;u<J.length;u++)if(o===J[u])return Ut[u];return o}function X(o,u){for(let a=0;a<J.length;a++)if(o===J[a])return u[a];return o}function Z(o){return o>="ً"&&o<="ٕ"}function st(o){return o==="L"?"LTR":o==="R"?"RTL":o==="C"?"CLR":o==="D"?"CRL":""}function xt(o,u,a,s){for(;u*a<s&&Z(o[u]);)u+=a;return u*a<s&&(o[u]=" ",!0)}function jt(o,u){for(let a=0;a<Y.length;a++)if(o===Y[a])return u[a];return o}function ft(o,u,a,s){for(let f=0;f<o.length;f++)(o[f]>u||!a&&o[f]===u)&&(o[f]+=s)}let V=[],q=[],K=[];const kt={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},Dt=5,yt=6,P=0,W=1,ct=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,Pt=/[\u0591-\u06ff\ufb1d-\ufefc]/;export{Yt as C};
