import{d as M,a8 as T,a9 as L,a as k,c as I,g as W,Q as $,V as D,Z as H,W as p,k as x,l as C,_ as X,u as m,A as Y,S as V,E as j,n as A}from"./vue.c8caa29a.js";import{L as B,f as N,h as P,M as Q}from"./BasicForm.943f4865.js";const U={...B.props,subBtuText:{type:String,default:"确认"},showIcon:{type:Boolean,default:!1},width:{type:Number,default:446},title:{type:String,default:""},maskClosable:{type:Boolean,default:!1},preset:{type:String,default:"dialog"}},s=function(a,t){var l;return a.currentStyle?a.currentStyle[t]:(l=document.defaultView)==null?void 0:l.getComputedStyle(a,null)[t]},o={left:0,top:0,currentX:0,currentY:0,flag:!1},Z=function(a,t,l){const S=document.body.clientWidth,u=document.documentElement.clientHeight,c=t.offsetWidth,y=t.offsetHeight,g=t.offsetLeft,v=t.offsetTop,b=S-g-c,w=u-v-y;s(t,"left")!=="auto"&&(o.left=s(t,"left")),s(t,"top")!=="auto"&&(o.top=s(t,"top")),a.onmousedown=function(n){o.flag=!0,n||(n=window.event,a.onselectstart=function(){return!1});const f=n;o.currentX=f.clientX,o.currentY=f.clientY},document.onmouseup=function(){o.flag=!1,s(t,"left")!=="auto"&&(o.left=s(t,"left")),s(t,"top")!=="auto"&&(o.top=s(t,"top"))},document.onmousemove=function(n){const f=n||window.event;if(o.flag){const _=f.clientX,e=f.clientY,i=_-o.currentX,h=e-o.currentY;let r=parseInt(o.left)+i,d=parseInt(o.top)+h;return-r>g?r=-g:r>b&&(r=b),-d>v?d=-v:d>w&&(d=w),t.style.left=r+"px",t.style.top=d+"px",typeof l=="function"&&l((parseInt(o.left)||0)+i,(parseInt(o.top)||0)+h),n.preventDefault&&n.preventDefault(),!1}}},q={class:"w-full cursor-move",id:"basic-modal-bar"},G=M({__name:"basicModal",props:{...U},emits:["on-close","on-ok","register"],setup(a,{emit:t}){const l=a;T(e=>({"4347f58f":e.widths}));const S=L(),u=k(null),c=k(!1),y=k(!1),g=I(()=>({...l,...m(u)})),v=I(()=>{const{subBtuText:e}=u.value;return e||l.subBtuText}),b=I(()=>({...S,...m(g),...m(u)}));function w(){c.value=!1,y.value=!1,t("on-close")}function n(){c.value=!1,t("on-close")}function f(){y.value=!0,t("on-ok")}const _={setProps:async function(e){u.value=Q(m(u)||{},e)},openModal:function(){c.value=!0,A(()=>{const e=document.getElementById("basic-modal"),i=document.getElementById("basic-modal-bar");Z(i,e)})},closeModal:w,setSubLoading:function(e){y.value=e}};return W()&&t("register",_),(e,i)=>{const h=N,r=P,d=B;return $(),D(d,j({id:"basic-modal"},m(b),{show:c.value,"onUpdate:show":i[0]||(i[0]=E=>c.value=E),onClose:n}),H({header:p(()=>[V("div",q,X(m(b).title),1)]),default:p(()=>[Y(e.$slots,"default")]),_:2},[e.$slots.action?{name:"action",fn:p(()=>[Y(e.$slots,"action")]),key:"1"}:{name:"action",fn:p(()=>[x(r,null,{default:p(()=>[x(h,{onClick:w},{default:p(()=>[C("取消")]),_:1}),x(h,{type:"primary",loading:y.value,onClick:f},{default:p(()=>[C(X(m(v)),1)]),_:1},8,["loading"])]),_:1})]),key:"0"}]),1040,["show"])}}});export{G as _};
