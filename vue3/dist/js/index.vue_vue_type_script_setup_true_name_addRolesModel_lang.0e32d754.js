import{_ as S}from"./NvapModal.01430e95.js";import{aN as F,n as N,aR as U}from"./NvapForm.32ab4956.js";import{u as _}from"./useModal.11f91f90.js";import{u as x,L as C}from"./layenum.51237ff4.js";import"./NvapTable.5831c320.js";import{T as I}from"./TableAction.19dbf54e.js";import{h as d,r as L,d as p,U as O,Z as T,X as r,k as i,u as l}from"./vue.71710d55.js";import{c as V}from"./roles.c85b50b3.js";const D=[{title:"id",key:"id"},{title:"角色名称",key:"name",render:o=>d(F,{type:"success"},{default:()=>o.name})}],E=(o,s)=>L({width:250,title:"操作",key:"action",fixed:"right",render:a=>d(I,{style:"button",actions:[{label:"权限分配",onClick:o.bind(null,a),ifShow:()=>!0},{label:"删除",onClick:s.bind(null,a),ifShow:()=>!0}]})}),$=[{field:"name",component:"NInput",label:"姓名",labelMessage:"请输入名字",giProps:{span:1},componentProps:{placeholder:"请输入姓名",onInput:()=>{}},rules:[{required:!0,message:"请输入姓名",trigger:["blur"]}]},{field:"code",component:"NTreeSelect",label:"菜单",labelMessage:"请选择菜单",giProps:{span:1},componentProps:{placeholder:"请选择菜单"}}],j=p({name:"addRolesModel"}),H=p({...j,setup(o,{expose:s}){const[a,{openModal:c,closeModal:m,setSubLoading:u}]=_({title:"添加角色"}),[f,{validate:g,getFieldsValue:h,setSchemas:b}]=x({gridProps:{cols:1},collapsedRows:3,labelWidth:120,layout:C.horizontal,showActionButtonGroup:!1,schemas:$}),w=async()=>{try{if(!await g()){const e=h();await V(e),m(),window.$message.success("提交成功")}}catch{window.$message.error("验证失败，请填写完整信息"),u(!1)}};s({open:async e=>{await b("code",{componentProps:{placeholder:"请选择菜单",options:l(e),multiple:!0,keyField:"code",labelField:"title",childrenField:"children",onUpdateValue:R=>{}}}),c()}});const y=()=>{};return(e,R)=>{const k=N,v=U,M=S;return O(),T(M,{onRegister:l(a),class:"NvapModal",onOnOk:w},{default:r(()=>[i(v,{ref:"formRef",onRegister:l(f),onReset:y,class:"NvapForm"},{statusSlot:r(({model:t,field:n})=>[i(k,{value:t[n],"onUpdate:value":P=>t[n]=P},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister"])]),_:1},8,["onRegister"])}}});export{H as _,E as a,D as c};
