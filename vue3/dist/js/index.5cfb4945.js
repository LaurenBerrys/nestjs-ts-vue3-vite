import{_ as g}from"./ComponentPage.vue_vue_type_script_setup_true_name_ComponentPage_lang.da812460.js";import{c as u,_ as v}from"./NvapTable.5831c320.js";import{c as x,a as E,_ as b}from"./index.vue_vue_type_script_setup_true_name_addRolesModel_lang.0e32d754.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_name_AssignPermissions_lang.0d2aaa25.js";import{a as L,h as U,E as j}from"./NvapForm.32ab4956.js";import{g as q}from"./roles.c85b50b3.js";import{d as z,a as f,r as B,c as I,U as K,Z as M,X as n,k as i,l as P,u as m}from"./vue.71710d55.js";import"./AppPage.vue_vue_type_script_setup_true_name_AppPage_lang.083a423a.js";import"./vue-router.37441a91.js";import"./vue-i18n.b2cb1419.js";import"./NvapModal.01430e95.js";import"./useModal.11f91f90.js";import"./layenum.51237ff4.js";import"./TableAction.19dbf54e.js";import"./axios.9678a311.js";const ss=z({__name:"index",setup(X){const{userInfo:p}=L(),l=f(),c=f(),d=B({}),_=s=>{},y=async s=>{let r={...m(d),...s};const{data:a}=await q(r);return a},k=async s=>{const r=u(p.menuList)||[];s.permissions||(s.permissions=[]);const a=async t=>{t.forEach(o=>{if(o.permissions){const e=j(o.permissions)?o.permissions:o.permissions.split(",");o.permissions=e.filter(R=>s.permissions.includes(R))}o.children&&a(o.children)})};await a(r),c.value.open(r,s)},w=s=>{},h=I(()=>u(p.menuList)||[]),C=async()=>{await l.value.open(h)};return(s,r)=>{const a=U,t=v,o=g;return K(),M(o,null,{default:n(()=>[i(t,{columns:m(x),request:y,"row-key":e=>e.id,ref:"actionRef",actionColumn:m(E)(k,w),"onUpdate:checkedRowKeys":_},{tableButton:n(()=>[i(a,{type:"primary",size:"small",onClick:C},{default:n(()=>[P("添加角色")]),_:1})]),_:1},8,["columns","row-key","actionColumn"]),i(A,{ref_key:"Assign",ref:c},null,512),i(b,{ref_key:"modalRef",ref:l},null,512)]),_:1})}}});export{ss as default};
