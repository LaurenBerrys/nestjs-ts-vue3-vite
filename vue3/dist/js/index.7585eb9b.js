import{d as D,a as x,c as P,a9 as se,h as ie,U as L,Z as H,X as C,u as M,k as p,A as le,V as $,W as g,a1 as S,F as j,N as ce,x as K,v as q,a6 as ue,a7 as ge,o as O,b as B,r as J,S as Y,Y as E,a4 as V,a2 as N,aa as de,ab as Z,H as me,ac as pe,ad as fe}from"./vue.71710d55.js";import{Z as he,$ as ve,a0 as ye,a1 as be,a2 as we,a3 as Ce,a4 as ke,a5 as Le,a6 as xe,a7 as X,a8 as Se,a9 as Fe,aa as Te,ab as _e,ac as Ie,ad as Me,ae as Ee,_ as oe,af as $e,ag as Ae,ah as Pe,ai as De,aj as Re,ak as ze,al as He,a as re,N as Oe,am as Ne,n as Be,an as R,ao as je,ap as Ue,aq as We,ar as Ke}from"./NvapForm.32ab4956.js";import{u as z,l as qe,a as Je,s as Ye}from"./NvapTable.5831c320.js";import{u as te}from"./vue-router.37441a91.js";import"./axios.9678a311.js";import"./vue-i18n.b2cb1419.js";(function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0})}function o(s){if(s.ep)return;s.ep=!0;const i=function(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}(s);fetch(s.href,i)}})();const Ve={Button:{},common:{primaryColor:"#2cb67d",primaryColorHover:"#2cb67d",primaryColorPressed:"#2cb67d",primaryColorSuppl:"#2cb67d",infoColor:"#2cb67d",infoColorHover:"#8fcdd4",infoColorPressed:"#2cb67d",infoColorSuppl:"#2cb67d",successColor:"#18A058FF",successColorHover:"#36AD6AFF",successColorPressed:"#0C7A43FF",successColorSuppl:"#36AD6AFF",warningColor:"#F0A020FF",warningColorHover:"#FCB040FF",warningColorPressed:"#C97C10FF",warningColorSuppl:"#FCB040FF",errorColor:"#D03050FF",errorColorHover:"#DE576DFF",errorColorPressed:"#AB1F3FFF",errorColorSuppl:"#DE576DFF",fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeMini:"12px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",scrollbarColor:"rgba(255, 255, 255, 0.2)",scrollbarColorHover:"rgba(255, 255, 255, 0.3)",scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .24), 0 3px 6px 0 rgba(0, 0, 0, .18), 0 5px 12px 4px rgba(0, 0, 0, .12)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .24), 0 6px 12px 0 rgba(0, 0, 0, .16), 0 9px 18px 8px rgba(0, 0, 0, .10)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}},Ze=D({name:"Provider"}),Xe=D({...Ze,setup(e){const{language:o,isDark:s}=ve(z()),{setTheme:i,setLanguage:n}=z(),l=x(null),c=x(null),m=x(null),f=te(),h=()=>{const a=b.value.common;for(const u in a)ye(`--${be(u)}`,document.documentElement).value=a[u]||""},y=z(),b=P(()=>{if(!y.themeColor)return Ve;const a=y.themeColor,u=we(a,6);return{common:{primaryColor:a,primaryColorHover:u,primaryColorPressed:u,primaryColorSuppl:a,infoColor:a,infoColorHover:u,infoColorPressed:u,infoColorSuppl:a},LoadingBar:{colorLoading:a}}}),k=()=>{var a;window.$loadingBar=Ce(),window.$notification=ke(),window.$message=function(u){let r=null;return new class{removeMessage(t=r,d=2e3){setTimeout(()=>{t&&(t.destroy(),t=null)},d)}showMessage(t,d,T={}){if(r&&r.type==="loading")r.type=t,r.content=d,t!=="loading"&&this.removeMessage(r,T.duration);else{const I=u[t](d,T);t==="loading"&&(r=I)}}loading(t){this.showMessage("loading",t,{duration:0})}success(t,d={}){this.showMessage("success",t,d)}error(t,d={}){this.showMessage("error",t,d)}info(t,d={}){this.showMessage("info",t,d)}warning(t,d={}){this.showMessage("warning",t,d)}}}(Le()),window.$dialog=((a=xe()).confirm=function(u={}){const r=!he(u.title);return a[u.type||"warning"]({showIcon:r,positiveText:"确定",negativeText:"取消",onPositiveClick:u.confirm,onNegativeClick:u.cancel,onMaskClick:u.cancel,...u})},a)};se(()=>{h()});const v=D({setup(){var a;h(),k(),o.value=="zhCN"?(l.value=X,c.value=Se):(l.value=null,c.value=null),i(m.value),n(o.value,(a=f.meta)==null?void 0:a.title)},render:()=>ie("div")});return(a,u)=>{const r=_e,t=Ie,d=Me,T=Ee,I=Fe;return L(),H(I,{"wh-full":"",locale:M(X),"date-locale":M(c),theme:M(s)?M(Te):null,"theme-overrides":M(b)},{default:C(()=>[p(T,null,{default:C(()=>[p(d,null,{default:C(()=>[p(t,null,{default:C(()=>[p(r,null,{default:C(()=>[p(M(v)),le(a.$slots,"default")]),_:3})]),_:3})]),_:3})]),_:3})]),_:3},8,["locale","date-locale","theme","theme-overrides"])}}}),Ge=D({name:"HuaweiCharge",props:{battery:{type:Object,default:()=>({})},calcDischargingTime:{type:String,default:""},calcChargingTime:{type:String,default:""},batteryStatus:{type:String,validator:e=>["充电中","已充满","已断开电源"].includes(e)}}}),Qe={class:"container"},eo={class:"number"},oo={class:"contrast"},ro=(e=>(ue("data-v-62db234c"),e=e(),ge(),e))(()=>g("div",{class:"circle"},null,-1)),to={class:"bubbles"},ao={class:"charging"},ae=oe(Ge,[["render",function(e,o,s,i,n,l){return L(),$("div",Qe,[g("div",eo,S(e.battery.level)+"%",1),g("div",oo,[ro,g("ul",to,[(L(),$(j,null,ce(15,c=>g("li",{key:c})),64))])]),g("div",ao,[g("div",null,S(e.batteryStatus),1),K(g("div",null," 剩余可使用时间："+S(e.calcDischargingTime),513),[[q,Number.isFinite(e.battery.dischargingTime)&&e.battery.dischargingTime!=0]]),K(g("span",null," 距离电池充满需要："+S(e.calcChargingTime),513),[[q,Number.isFinite(e.battery.chargingTime)&&e.battery.chargingTime!=0]])])])}],["__scopeId","data-v-62db234c"]]),no=D({name:"Lockscreen",components:{LockOutlined:Ae,LoadingOutlined:Pe,UserOutlined:De,ArrowRightOutlined:Re,ApiOutlined:ze,WifiOutlined:He,recharge:ae},setup(){const e=z(),o=re(),{month:s,day:i,hour:n,minute:l,second:c,week:m}=function(){let r;const t=x(0),d=x(0),T=x(""),I=x(0),F=x(0),w=x(0),U=x(0),W=()=>{const _=new Date;t.value=_.getFullYear(),d.value=_.getMonth()+1,T.value="日一二三四五六".charAt(_.getDay()),I.value=_.getDate(),F.value=(_.getHours()+"").padStart(2,"0")||new Intl.NumberFormat(void 0,{minimumIntegerDigits:2}).format(_.getHours()),w.value=(_.getMinutes()+"").padStart(2,"0")||new Intl.NumberFormat(void 0,{minimumIntegerDigits:2}).format(_.getMinutes()),U.value=_.getSeconds()};return W(),O(()=>{clearInterval(r),r=setInterval(()=>W(),1e3)}),B(()=>{clearInterval(r)}),{month:d,day:I,hour:F,minute:w,second:U,week:T}}(),{online:f}=function(){const r=x(!0),t=d=>{r.value=typeof d=="boolean"?d:d.target.online};return navigator.onLine?t(!0):t(!1),O(()=>{window.addEventListener("online",t),window.addEventListener("offline",t)}),B(()=>{window.removeEventListener("online",t),window.removeEventListener("offline",t)}),{online:r}}(),{battery:h,batteryStatus:y,calcDischargingTime:b,calcChargingTime:k}=(()=>{const r=J({battery:{charging:!1,chargingTime:0,dischargingTime:0,level:100}}),t=F=>{for(const w in r.battery)r.battery[w]=F[w];r.battery.level=100*r.battery.level},d=P(()=>`${~~(r.battery.dischargingTime/3600)}小时${~~(r.battery.dischargingTime/60%60)}分钟`),T=P(()=>`${~~(r.battery.chargingTime/3600)}小时${~~(r.battery.chargingTime/60%60)}分钟`),I=P(()=>r.battery.charging&&r.battery.level>=100?"已充满":r.battery.charging?"充电中":"已断开电源");return O(async()=>{const F=$e();t(F),F.onchargingchange=({target:w})=>{t(w)},F.onchargingtimechange=({target:w})=>{t(w)},F.ondischargingtimechange=({target:w})=>{t(w)},F.onlevelchange=({target:w})=>{t(w)}}),{...Y(r),batteryStatus:I,calcDischargingTime:d,calcChargingTime:T}})(),v=(o.userInfo||{}).name||"",a=J({showLogin:!1,loginLoading:!1,isLoginError:!1,errorMsg:"密码错误",loginParams:{name:v||"",password:""}}),u=r=>a.showLogin=r;return{...Y(a),online:f,month:s,day:i,hour:n,minute:l,second:c,week:m,battery:h,batteryStatus:y,calcDischargingTime:b,calcChargingTime:k,onLockLogin:u,onLogin:async()=>{if(!a.loginParams.password.trim())return;const r={name:v,password:a.loginParams.password};a.loginLoading=!0;try{const{code:t,msg:d}=await o.login(r);t===200?(u(!1),e.setLock(!1)):(a.errorMsg=d,a.isLoginError=!0,a.loginLoading=!1)}catch{}a.loginLoading=!1},goLogin:()=>{u(!1),e.setLock(!1),o.resetStateAndToLogin()}}}}),so={class:"lock-box"},io={class:"lock"},lo={class:"local-time"},co={class:"time"},uo={class:"date"},go={class:"computer-status"},mo={key:1,class:"login-box"},po={class:"username"},fo={key:0,class:"w-full flex"},ho={class:"text-red-500"},vo={class:"w-full mt-1 flex justify-around"},yo=oe(no,[["render",function(e,o,s,i,n,l){const c=E("lock-outlined"),m=Oe,f=ae,h=E("wifi-outlined"),y=E("api-outlined"),b=E("user-outlined"),k=Ne,v=E("LoadingOutlined"),a=E("arrow-right-outlined"),u=Be;return L(),$("div",{class:V([{onLockLogin:e.showLogin},"lockscreen"]),onKeyup:o[5]||(o[5]=r=>e.onLockLogin(!0)),onMousedown:o[6]||(o[6]=Z(()=>{},["stop"])),onContextmenu:o[7]||(o[7]=Z(()=>{},["prevent"]))},[e.showLogin?N("",!0):(L(),$(j,{key:0},[g("div",so,[g("div",io,[g("span",{class:"lock-icon",title:"解锁屏幕",onClick:o[0]||(o[0]=r=>e.onLockLogin(!0))},[p(m,null,{default:C(()=>[p(c)]),_:1})])])]),p(f,{battery:e.battery,"battery-status":e.batteryStatus,"calc-discharging-time":e.calcDischargingTime,"calc-charging-time":e.calcChargingTime},null,8,["battery","battery-status","calc-discharging-time","calc-charging-time"]),g("div",lo,[g("div",co,S(e.hour)+":"+S(e.minute),1),g("div",uo,S(e.month)+"月"+S(e.day)+"号，星期"+S(e.week),1)]),g("div",go,[g("span",{class:V([{offline:!e.online},"network"])},[p(h,{class:"network"})],2),p(y)])],64)),e.showLogin?(L(),$("div",mo,[p(k,{size:128},{default:C(()=>[p(m,null,{default:C(()=>[p(b)]),_:1})]),_:1}),g("div",po,S(e.loginParams.name),1),p(u,{type:"password",autofocus:"",value:e.loginParams.password,"onUpdate:value":o[1]||(o[1]=r=>e.loginParams.password=r),onKeyup:de(e.onLogin,["enter"]),placeholder:"请输入登录密码"},{suffix:C(()=>[p(m,{onClick:e.onLogin,style:{cursor:"pointer"}},{default:C(()=>[e.loginLoading?(L(),H(v,{key:0})):(L(),H(a,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["value","onKeyup"]),e.isLoginError?(L(),$("div",fo,[g("span",ho,S(e.errorMsg),1)])):N("",!0),g("div",vo,[g("div",null,[g("a",{onClick:o[2]||(o[2]=r=>e.showLogin=!1)},"返回")]),g("div",null,[g("a",{onClick:o[3]||(o[3]=(...r)=>e.goLogin&&e.goLogin(...r))},"重新登录")]),g("div",null,[g("a",{onClick:o[4]||(o[4]=(...r)=>e.onLogin&&e.onLogin(...r))},"进入系统")])])])):N("",!0)],34)}],["__scopeId","data-v-b530ddd7"]]),bo=D({__name:"App",setup(e){const o=z(),s=P(()=>o.lock),i=P(()=>o.lockTime),n=te();let l;const c=()=>{clearInterval(l),n.name=="login"||s.value||(o.setLock(!1),o.setLockTime(),l=setInterval(()=>{if(o.setLockTime(i.value-1),i.value<=0)return o.setLock(!0),clearInterval(l)},1e3))};return O(()=>{document.addEventListener("mousedown",c)}),B(()=>{document.removeEventListener("mousedown",c)}),(m,f)=>{const h=E("router-view"),y=Xe;return L(),$(j,null,[p(y,null,{default:C(()=>[p(h,null,{default:C(({Component:b})=>[(L(),H(pe(b)))]),_:1})]),_:1}),M(o).lock&&m.$route.name!=="login"?(L(),H(me,{key:0,name:"slide-up"},{default:C(()=>[p(yo)]),_:1})):N("",!0)],64)}}});function G(e,o){var s;return e=typeof(s=e)=="object"&&s!==null?e:Object.create(null),new Proxy(e,{get:(i,n,l)=>n==="key"?Reflect.get(i,n,l):Reflect.get(i,n,l)||Reflect.get(o,n,l)})}function Q(e,{storage:o,serializer:s,key:i,debug:n}){try{const l=o==null?void 0:o.getItem(i);l&&e.$patch(s==null?void 0:s.deserialize(l))}catch{}}function ee(e,{storage:o,serializer:s,key:i,paths:n,debug:l}){try{const c=Array.isArray(n)?function(m,f){return f.reduce((h,y)=>{const b=y.split(".");return function(k,v,a){return v.slice(0,-1).reduce((u,r)=>/^(__proto__)$/.test(r)?{}:u[r]=u[r]||{},k)[v[v.length-1]]=a,k}(h,b,function(k,v){return v.reduce((a,u)=>a==null?void 0:a[u],k)}(m,b))},{})}(e,n):e;o.setItem(i,s.serialize(c))}catch{}}var wo=function(e={}){return o=>{const{auto:s=!1}=e,{options:{persist:i=s},store:n}=o;if(!i)return;const l=(Array.isArray(i)?i.map(c=>G(c,e)):[G(i,e)]).map(({storage:c=localStorage,beforeRestore:m=null,afterRestore:f=null,serializer:h={serialize:JSON.stringify,deserialize:JSON.parse},key:y=n.$id,paths:b=null,debug:k=!1})=>{var v;return{storage:c,beforeRestore:m,afterRestore:f,serializer:h,key:((v=e.key)!=null?v:a=>a)(y),paths:b,debug:k}});n.$persist=()=>{l.forEach(c=>{ee(n.$state,c)})},n.$hydrate=({runHooks:c=!0}={})=>{l.forEach(m=>{const{beforeRestore:f,afterRestore:h}=m;c&&(f==null||f(o)),Q(n,m),c&&(h==null||h(o))})},l.forEach(c=>{const{beforeRestore:m,afterRestore:f}=c;m==null||m(o),Q(n,c),f==null||f(o),n.$subscribe((h,y)=>{ee(y,c)},{detached:!0})})}}();const Co=["/login","/404","/401"];R.beforeEach(async e=>{var s;document.title=qe((s=e.meta)==null?void 0:s.title);const o=re();if(!o.token)return!!Co.includes(e.path)||`/login?redirect=${e.path}`;if(e.path==="/login")return"/";if(o.userInfo)return R.getRoutes().length===5?(We(o.userInfo.menuList).forEach(i=>{R.addRoute(i)}),{...e,replace:!0}):!0;try{const i=await je();return Ue(i),o.setUserInfo(i),{...e,replace:!0}}catch{return o.resetState(),`/login?redirect=${e.path}`}}),R.afterEach(()=>{});const ko={created(e,o){const{value:s}=o;Je().hasPermission([...s])||(e.style.display="none")}},ne=Ke();ne.use(wo);const A=fe(bo);A.config.warnHandler=()=>{},A.directive("permission",ko),A.use(ne),A.use(R),A.use(Ye),A.mount("#app");
